# はじめに

# 乾杯！

# スポンサーセッション
FindyさんのオフィスはITに関するイベントなら無料貸し出しらしい
Findy Conferenceでテックカンファレンス一覧がある

# 自己紹介


# インターン生でもauth0で認証基盤刷新出来るのか
みなさん笑ってくれてよかった


# モダンな認証を実現！ React Router v7 ミドルウェアで Auth0 認証の神設計
エイドリアンさん

## 繰り返されるボイラープレート：各ルートやコンポーネントで同じ認証チェックを記述
認証ロジックが変更されると全ページを修正しなければいけない
ガードの実装に時間を取られ、DXの低下
レンダリング後のリダイレクトによる**チラつき**が気になる UXの低下

## ミドルウェアによる一元管理
UIレイヤーから認証を外し、ミドルウェアで行う
Loader以前で行い、データ取得を行う前に認可を行なってしまう -> 不正アクセスが1秒も発生しない
疎結合 -> UIコンポーネントで認証を意識しないため、ピュアな表示に集中できる
一元化 -> middlewareを見ればセキュリティの把握、設定が可能

## これが神設計だ
Auth0 React Router Middleware SDKを使う
root.tsxでmiddlewareを設定する -> auth0Middleware
```typescript
export const middleware = [
    auth0Middleware(),
];
```
ユーザー情報をcontextに入れることができる
保護したいページに`requireAuth`をつけることで認可できる
```typescript
export const middleware = [requireAuth];
```
未認証の場合は自動的にログイン画面にいく
ログイン後、自動的にリダイレクトする

## 神設計の理由
DRYになっている
型安全であり、簡潔
コンポーネントはユーザーがすでに認証ずみ前提でかける
チラつきが０ -> 最高のUXを提供
セキュリティ・バイ・デフォルト -> middlewareがルートの門番になる

## ゴジラ級の安心感
ミドルウェアを使いましょう！
UIレイヤーの重複コードを排除
全てのルートをミドルウェアが自動的に守る
React RouterのミドルウェアでDXを最大化


# 認証はすべての始まり ― Auth0 × データ基盤で考えるIDの価値
## 認証の作り方ではなく使い方の話
ただのセキュリティゲートではない
ログインは最初のユーザーイベントである
-> ユーザーの理解や意思決定のスタート地点

## データ基盤に繋がった瞬間に起きること
ID統合によるデータの民主化
バラバラのデータを繋げられるのか

Auth0 ID = 共通キー
-> バラバラだったDBやSaaSのデータが「同じユーザー」としてつながる
-> セキュリティではなくプロダクト理解の話になる

## よくあるプロダクトの構図
みんなやりたいこと
-> データ分析
-> UX改善
-> Ai活用
-> パーソナライズ

ユーザーを一意に識別できることが前提
-> 点を線にする
-> 認証はユーザーを識別する

## IDが統合されると見える世界
データはあるのに繋がらない -> 「点での分析」

ユーザー行動が「ストーリー」になる
IDは全ての分析の軸

## まとめ
認証は守るだけではなく、データ戦略の始まりである
**Auth0はユーザーを一意に割り当てるサービス**

# Event Stream + AWSでユーザーイベントを通知する
## デモ
ユーザーを削除すると自作アプリケーションにも通知

## 構成ず
EventBridgeにAuth0からイベントを通知
-> そこからは一般的な非同期イベントアーキテクチャ

## Auth0 Event Stream
Auth0で発生した特定のイベントをリアルタイムに外部へ配信する（EA）
-> Webhook
-> EventBridge
-> Actions

## AWSサービスの役割
EventBridge: Auth0イベントを受領しターゲットへルーティング
SQS: イベントを維持値保持 Lambdaの負荷を減らす
DLQ
Lambda: ビジネスロジックを実行

## 主な利点
非同期処理 -> イベント消失リスクを大幅に智元 -> Auth0のメイン処理を止められない
リトライ -> SQSの標準機能によりリトライできる -> Lambdaで自動再思考
DLQでの再処理 -> DLQでイベントをロストしない

## 運用上の考慮
イベント順序：順序保証がないためFIFOきゅーの検討が必要 -> DLQがあるためややこしい
冪等性：同じイベントが複数会届く可能性を考慮し、event_idによるチェックが必要
コスト：サービスごとに料金がかかる

# 拡張
他のイベント対応
複数ターゲット
モニタリング

## まとめ
Auth0で堅牢な連携を実現
本番運用では順序、冪等性、コストを考えよう

## 記事がある
Auth0のEvent StreamとAWS EventBridgeを連携して、リトライ可能かつ非同期に情報を...でテックブログを書いている

# 休憩


# AIエージェントと協働するAPI開発: SDD x Postman x MCP 編
## SDD
SpecをSingle Source Of Truethとしてコード、テスト、検証として開発
人はコードではなく仕様（Spec）をなおす


## API にとってAPI仕様 = Single Source of True
APIによってAPI仕様が大事

## 良いAPIに求められる特性
インプットによって使いやすさが変わる
フィードバックループを回して指摘していく

## APIファースト
ゴール：APIコンストラクトの完成
理想の開発モデル -> API設計ファースト -> コードを書く前にAPI仕様を書く

## Postman APIエージェントのAPI設計検証
GithubにあるプロダクトからAPI仕様を起こす
API仕様から動作検証のモックAPIを作成
テストコード・ドキュメントの生成が可能


# 入社2ヶ月のエンジニアがAuth0にコントリビュートしてみた
## 問題発生：Attributesフラグが立たない
LINEのEmail Addressにフラグが立たない
-> 手動でチェックを入れる必要がある

## 最初の関門：300以上リポジトリ
Auth0は一部OSSで提供している！
-> パブリックリポジトリ300以上がある
-> Geminiに聞いたら、terraform-provider-auth0かもって教えてくれた

## 調査の軌跡、構造を深掘り
Providerはただの橋渡し
実装自体はSDK側にある！
-> バグの原因はここかも！

## 原因特定：決定的な違い
SDKで型定義がLINEとAppleで違う
LINE -> Commonのものを使っている
Apple -> Apple独自のものを使っている
-> フィールドがないため、無視されている！！

## Issue作成
SDKは非公開のOpenAPIから自動生成されている
-> Issueを作成した -> 675

## 速報
昨晩、追加修正が決まりました！

## まとめ
OSSは作ったものじゃなく、一緒に育てるもの
バグを見つけたらコントリビュートしよう！！


# AI に「学ばせ、調べさせ、作らせる」。auth0 開発を加速させる7つの実践的アプローチ
## 朝鮮の恥あり：Auth0の壁
Auth0に対して不安があった

## 結論
怖くなかった！

## 学ぶ
Mermaidシーケンス図で整理するのがよかった
テキストやコードっだけでは時系列がおえない
-> コードを読ませることでMermaidでシーケンスを作成できる

## 調べる
Web UIをナビゲートしてもらう
AIに画面を見せてナビゲートする（Cursor・Claude Code）
-> 内蔵ブラウザを使用することで、エラーの内容からバグ修正
まだ遅くて、困った時の手段の一つだが、将来性を感じる

## 作る
ドキュメントが充実しており、AI実装をさせるのが驚くほどスムーズ

土地勘のない機能の実装
ライブラリが上がった時の破壊的な変更
-> 驚くほどスムーズ

## まとめ
Auth0への見方が180°変わった
認証領域は恐れなくてもよくなる


# Auth0/Cognito/Ory Hydraを比較してみた
## 2019年 中部電力のID担当者としてAuth0を選んだ

## Auth0とCognitoとOry
CognitoはUniversal Login相当の機能が充実
OryはOpenAIやLayerXが採用

## 調査にあたって
B2C IDとして必要な60をピックアップ調査
共通ログイン画面を利用する前提

## 結論
Auth0: 95点
Cognito: 72点 -> 開発周り以外がもう一歩
Ory: 83点 -> 開発運用系が遅い

## お金
auth0: $7,700 -> 開発工数が最小限
Cognito: $2,400
Ory: $1,330

## 感じたこと
共通ID基盤はAuth0がおすすめ
要件が厳しくない -> Cognito
Oryは運用周りが整えば有力。セルフホストが可能


# Bedrock Agent CoreにIdentity機能があるけど、これってAuth0はもう不要ってことですか？
## Auth0 for GenAI
2025年 Auth0 for AI Agentに出会う
-> User Authentication
-> Token Vault
-> Async Authorization
-> FGA For Auth0

RAGでは、ドキュメント取得し、FGAで認可を行い、フィルタリングする

## Bedrock AgentCore
2025年末 Bedrock AgentCoreに出会う
-> Runtime
-> Identity
-> Gateway
-> Memory
-> Observability
-> 他

## 3LOができない
GatewayにgrantTypeとdefalut return urlが設定に入ってない
ドキュメントにはある
-> 未実装かも

## 最後に
できない
-> 3LOはAuth0でToken Vaultを使用する
